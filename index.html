<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="main.css" />
    <style>
      .block-hide {
        opacity: 0;
      }
      @media (prefers-reduced-motion: no-preference) {
        @media (prefers-reduced-motion: no-preference) {
          .block-animation {
            animation: enter 1s 1;
          }
        }
        @keyframes enter {
          0% {
            transform: translateY(-20%);
            opacity: 0;
          }
          100% {
            transform: translateY(0%);
            opacity: 1;
          }
        }
      }
    </style>
    <title>Document</title>
  </head>
  <body>
    <div class="block popup">
      <span>âœ¨Discover Your Dream Property with Estatein</span>
      <a>Learn More</a>
      <button></button>
    </div>
    <div class="block header">
      <div class="header__left">
        <div class="header__logo"></div>
        <div class="header__logo-text"></div>
      </div>
      <div class="header__center">
        <button></button>
        <button></button>
        <button></button>
        <button></button>
      </div>
      <div class="header_right">
        <button></button>
      </div>
    </div>
    <div class="block main-card"></div>
    <div class="block block-animation card-header-block"></div>

    <main class="main">
      <article class="standart-block">
        <div class="block block-hide abstract-stars"></div>
        <div class="block block-hide title-with-paragraph"></div>
        <div class="Grid">
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-tilte-paragraph-button"></div>
        </div>
      </article>
      <article class="standart-block">
        <div class="block block-hide abstract-stars"></div>
        <div class="block block-hide title-with-paragraph"></div>
        <div class="Grid">
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-tilte-paragraph-button"></div>
        </div>
      </article>
      <article class="standart-block-left">
        <div class="block block-hide abstract-stars"></div>
        <div class="LeftCont">
          <div class="block block-hide title-with-paragraph"></div>
          <div class="block block-hide card card-tilte-paragraph-button"></div>
        </div>
        <div class="RightCont">
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-icon-left"></div>
          <div class="block block-hide card card-icon-left"></div>
        </div>
      </article>
    </main>
    <div class="block block-hide main-card"></div>
    <footer class="block block-hide footer"></footer>
    <footer class="block block-hide bottom-footer"></footer>
    <script src="main.js"></script>
    <script>
      const throttle = (func, limit) => {
        let inThrottle;
        return () => {
          if (!inThrottle) {
            func.call();
            inThrottle = true;
            setTimeout(() => (inThrottle = false), limit);
          }
        };
      };
      const handleScrollAnimation = () => {
        const entries = Array.from(document.getElementsByClassName("block"));
        entries.forEach((element, index) => {
          if (isInViewport(element)) {
            if (
              index - 1 >= 0 &&
              entries[index - 1].className.includes("block-animation")
            ) {
              if (!element.className.includes("block-animation")) {
                element.className = element.className.replace(
                  "block-hide ",
                  ""
                );
                element.className += " block-animation";
              }
            }
          }
        });
      };
      function isInViewport(element) {
        const rect = element.getBoundingClientRect();
        return (
          rect.top >= 0 &&
          rect.left >= 0 &&
          rect.bottom <=
            (window.innerHeight || document.documentElement.clientHeight) &&
          rect.right <=
            (window.innerWidth || document.documentElement.clientWidth)
        );
      }
      let res = throttle(handleScrollAnimation, 100);
      window.addEventListener("scroll", () => {
        res();
      });
    </script>
  </body>
</html>
